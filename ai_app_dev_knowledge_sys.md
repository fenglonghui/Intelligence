### AI应用开发体系

#### 一、RAG - 检索增强生成

         一句话核心： 给大模型一本“参考书”，让它回答时不再只凭记忆，而是能查阅最新、最准确的资料。
         RAG是一种将信息检索技术与大语言模型生成能力相结合的架构。它在回答用户问题前，会先从外部知识库（如文档、数据库、网络）中检索出相关片段，
         然后将这些片段和原始问题一起交给大模型，让模型基于这些“证据”生成回答。

         技术栈:
               框架：LangChain, LlamaIndex
               检索器：Chroma, Pinecone, Weaviate, Elasticsearch
               工作流:
                     用户问题 -> [检索器] -> 相关文档片段 -> [增强提示构造] -> [LLM生成] -> 基于事实的答案
               高级技巧：重排序、多检索器混合、子查询分解

         RAG存在的意义(为什么需要RAG?):
            1.解决大模型幻觉问题
            2.保护私有数据
            3.增强专业能力：可以针对法律、医疗、金融等专业领域构建知识库，让通用模型变成领域专家
            4.知识实时更新, 只需更新外部知识库，就能让模型获取最新信息,无需重新训练
    
    
         RAG工作流程:
            1.检索：将用户问题转换为查询向量，在向量数据库中搜索语义最相关的文本块（Top-k个）。
            2.增强：将检索到的相关文本块（作为“上下文”或“参考”）与用户原问题一起，组装成一个新的、信息更丰富的提示（Prompt）。
            3.生成：将这个增强后的提示提交给大语言模型，让它生成最终答案。模型通常会被告知“请根据以下上下文回答问题”。
    
         应用场景(垂直领域):  
           1.智能客服, 问答机器人
             基于产品手册、FAQ文档回答用户问题。
             注: FAQ是"常见问题解答文档"的简称
           2.企业知识助手
             员工查询公司制度、项目文档、会议纪要。
           3.学术研究助手
             基于大量论文资料回答专业问题。
           4.法律/金融信息分析
             快速归纳总结最新的法律法规、招股说明书。

#### 二、Agent - 智能体

        一句话核心： 给大模型一个"大脑"和"工具箱"，让它能"自主规划"、"使用工具"、"执行多步任务"。
        Agent是一个能够感知环境、进行决策并执行行动以实现目标的系统。
        在大模型语境下，通常指一个以大语言模型为“大脑”或“决策核心”，能够调用外部工具、记忆历史、并进行复杂任务规划的程序。

        技术栈:
              框架：LangChain
              核心模式：ReAct, Plan-and-Execute, OpenAI Function Calling
              工作流:
                    目标 -> [LLM思考：规划下一步] -> [选择并执行工具] -> [观察结果] -> [判断是否完成] -> (循环) -> 最终输出

        Agent类型:
              动作型：根据当前状态决定单一动作（如游戏AI）。
              规划型：制定多步计划并执行（如自主研究助手）。
              多智能体：多个Agent协作或竞争，完成更复杂的任务（如软件公司模拟）。

        1.Agent 核心思想
           LLM 本身只是一个"思考者"，而Agent让它成为"行动者"。
           LLM 负责理解目标、拆解步骤、做出决策；
           外部工具（如计算器、搜索引擎、API、代码解释器）则是它的手脚，负责执行具体操作。

        2.Agent 核心组件（ReAct 范式是其典型体现）
          
            一个强大的Agent通常包含以下几个关键部分：
             1.规划
               将复杂目标拆解为可执行的子任务序列（Plan）。
             2.工具使用
               根据当前步骤，选择合适的工具（Tools）并正确调用。
             3.记忆
               - 短期记忆: 记住当前对话和任务的上下文。
               - 长期记忆: 从历史交互中学习，存储关键信息以供未来调用。
             4.行动与反思
               执行行动后，观察结果（Observation），评估是否达成目标，若未达成则反思并调整计划（Reflection）。

         3.典型应用场景
           1.自主数据分析（写SQL、画图、写报告）
             用户说"分析一下上个月的销售数据"，Agent可以自动编写SQL查询数据库、将结果绘图、并生成分析报告。
           2.自动化工作流（订机票、写邮件、管理日程）
             "帮我订一张下周去北京最便宜的机票，并加入日历"。Agent可以搜索航班、比价、完成预订、并调用日历API创建事件。
           3.AI科研助手
             根据研究主题，自动检索相关文献、下载并总结、提出假设、甚至生成实验代码框架。
           4.游戏NPC
             在游戏中创建具有长期记忆、能自主决策和与玩家进行复杂交互的非玩家角色。
               

#### 三、RAG 与 Agent 的关系与结合
        它们不是互斥的，而是可以强强联合，构建出更强大的应用。

        特性	                        RAG	                              Agent
    
        核心目标                     知识增强                            行动增强

        主要功能              为模型提供准确、最新的外部信息参考。  赋予模型使用工具、规划任务、自主执行的能力。

        类比                 给模型一本“参考书”。               给模型一个“大脑”和“工具箱”。

        常见结合方式          作为Agent的一个核心工具。          将RAG作为一个知识检索工具集成进Agent的能力集中。

#### 四、RAG与Agent的总结

        1.RAG 是解决模型"知识"问题的利器，让回答有据可依。
        2.Agent 是解决模型"能力"问题的框架，让模型有事能做。
        在现代AI应用开发中，"RAG + Agent" 正成为构建复杂、可靠、实用AI系统的黄金组合。
        RAG保证信息质量，Agent提供执行能力，二者共同将大语言模型从出色的聊天者，转变为真正能解决问题的智能助手。


#### 五、MCP - 模型上下文协议
        是由Anthropic公司主导创建的一个开放协议标准。用来标准化"LLM应用程序"与"外部数据源"、"工具"和"服务"的连接方式。
        
        核心定位: 工具与模型的"通用连接器"与"能力扩展总线"
        
        MCP解决的核心痛点
          1.每个AI应用都需要为每个数据源编写自定义的连接器。
          2.工具能力被绑定在特定平台或框架中

        MCP核心架构
           MCP定义了三个核心角色和简单的通信协议（基于JSON-RPC 消息通信）：
             1.客户端
               通常是AI应用本身（如Claude Desktop、支持MCP的IDE）。它想知道“我能用什么工具和数据源？”。
             2.服务器
               提供具体工具或数据源的进程（如一个连接公司数据库的服务）。它宣告：“我这里有这些工具（搜索用户、查订单），这些数据源（产品文档）”。
               定义并提供Tool、 Resource, Prompt等服务,  
                · Tool 提供业务逻辑处理服务,
                · Resource 提供数据信息服务, 
                · Prompt 帮助用户完成特定任务的预写模板。
             3.协议
               定义客户端与服务器之间如何发现、调用、传输数据的标准消息格式。
               传输协议:
                        1.stdio 模式, 
                        2.基于sse的Remote模式
                        3.streamable-http 模式

        MCP 与RAG/Agent的关系
          1.为RAG服务
            MCP服务器可以是一个专业的RAG数据源服务器，例如，一个专门连接公司Confluence的服务器，它可以为任何MCP客户端提供“检索Confluence文档”的能力。

          2.为Agent赋能
            MCP是Agent获取工具的最高效、最标准化的方式。一个Agent框架只需实现MCP客户端，就能瞬间接入整个生态的成千上万个工具，无需再为每个工具单独编写适配器。
           

        MCP、RAG、Agent 三者关系与演进趋势
        
           这是一个清晰的演进路径：
              1.RAG（解决“知”的问题）
                 让模型知道得更多、更准。是信息输入的增强。
              2.Agent（解决“行”的问题）
                 让模型能规划、能执行。是思考和行动能力的增强。
              3.MCP（解决“连接”的问题）
                 为模型（通过其应用）提供一个标准化、无限扩展的“手和脚”的生态系统。是能力接入方式的革命。


        现代AI应用开发全景图：

            [用户需求]
                ↓
            [AI应用/Agent]  ← 通过 MCP 协议调用 →  [海量工具与数据源服务器]
            （作为MCP客户端）                    （RAG数据源、API工具、计算引擎等）
                ↓
            [利用RAG技术获取精准知识] + [利用Agent技术进行规划与执行]
                ↓
            [完成复杂任务]

        
        当前，最前沿的应用正在将三者深度融合：一个以Agent为大脑、通过MCP无缝调用各种工具（其中许多工具本身就是RAG系统）的架构，正在成为构建强大、安全、可扩展企业级AI应用的黄金标准。 
        
